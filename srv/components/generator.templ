// srv/components/generator.templ
package components

templ GeneratorForm() {
    <div class="container">
        <h1>D&D Adventure Generator</h1>
        <form
            hx-post="/generate"
            hx-target="#status"
            hx-swap="innerHTML"
            hx-indicator="#spinner"
        >
            <div class="form-group">
                <label for="prompt">Adventure Prompt:</label>
                <textarea 
                    name="prompt" 
                    required
                    placeholder="Describe your adventure idea..."
                ></textarea>
            </div>
            <button type="submit">
                <span>Generate Adventure</span>
                <div id="spinner" class="htmx-indicator">ğŸ²</div>
            </button>
        </form>
        
        <div id="status" class="status-container"></div>
    </div>
}

templ GenerationStatus(sessionID string) {
    <div
        hx-ext="ws"
        hx-ws={ "connect:/ws/" + sessionID }
        class="generation-status"
    >
        <div class="progress-container">
            <div class="status-message">
                ğŸ² Initializing adventure generation...
            </div>
        </div>
    </div>
}